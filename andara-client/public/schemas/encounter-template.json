{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "EncounterTemplate",
  "description": "Template for a combat or interaction encounter",
  "required": ["encounterId", "name", "type"],
  "properties": {
    "encounterId": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for this encounter template"
    },
    "name": {
      "type": "string",
      "minLength": 1,
      "maxLength": 255,
      "description": "Display name of the encounter"
    },
    "description": {
      "type": "string",
      "description": "Description of the encounter scenario"
    },
    "type": {
      "type": "string",
      "enum": ["combat", "dialogue", "puzzle", "discovery"],
      "description": "Type of encounter"
    },
    "participants": {
      "type": "array",
      "description": "NPCs or creatures involved",
      "items": {
        "type": "object",
        "properties": {
          "npcTemplateId": {
            "type": "string",
            "format": "uuid",
            "description": "Reference to NPC template"
          },
          "role": {
            "type": "string",
            "enum": ["enemy", "ally", "neutral", "boss"]
          },
          "count": {
            "type": "integer",
            "minimum": 1,
            "default": 1
          }
        },
        "required": ["npcTemplateId", "role"]
      }
    },
    "conditions": {
      "type": "object",
      "properties": {
        "timeOfDay": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["dawn", "day", "dusk", "night"]
          }
        },
        "weather": {
          "type": "array",
          "items": { "type": "string" }
        },
        "regionId": {
          "type": "string",
          "format": "uuid"
        }
      }
    },
    "rewards": {
      "type": "object",
      "properties": {
        "experience": { "type": "integer", "minimum": 0 },
        "items": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "itemTemplateId": { "type": "string", "format": "uuid" },
              "quantity": { "type": "integer", "minimum": 1 },
              "probability": { "type": "number", "minimum": 0, "maximum": 1 }
            }
          }
        }
      }
    },
    "metadata": {
      "type": "object",
      "properties": {
        "version": { "type": "string" },
        "author": { "type": "string" },
        "description": { "type": "string" }
      }
    }
  }
}
